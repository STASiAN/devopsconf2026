# От Kubespray к единой платформе: как Kubernetes, Cluster API и Crossplane связали облако и on-premise в цельную экосистему

## Описание доклада

Я хочу рассказать вкратце свой путь, который я прошел за последние пять лет, через N-ную версию идеальной, по мнению бывалого DevOps-инженера, платформы. Как шел мой путь как инженера вместе с эволюцией платформ, какими сценариями мы пренебрегали и какие реализовывали. Все же знают эти вот кружки, где больше SRE, где больше DevOps. Как произошла DevOps-трансформация и произошло ли взаимодействие DevOps-отделов с другими? Можно поговорить про процессы в этом месте, но хотелось бы больше поговорить про технологии.

### История: от железа до современных платформ

Я хочу рассказать о том, как давным-давно, когда только появился Kubernetes, и все еще боялись Docker-контейнеров, мы все равно ставили Kubernetes на железо. Прошли через Kubespray, пытались делать IaaS под Kubernetes. Какие тулзы мы использовали, что мы делали. Не было еще придумано слово GitOps, но уже были CI-системы. Какие CD-системы мы строили. Если поговорить про CI, то оно плюс-минус абсолютно разное у всех. Но мы пришли к достаточно качественному Continuous Delivery. Какой путь мы прошли. Какие беды мы пережили. Зачем мы это делали, что требовал бизнес.

### Упрощение сложности

Один простой момент: когда твоя система становится слишком сложной, рабочие люди перестают ей пользоваться, потому что порог входа огромный. Как мы при помощи Crossplane и композитных ресурсов упростили инфраструктуру так, что она стала проще любого Terraform.

Давайте поиграем в секту: кто любит Terraform, а кто не любит?

- Готовы ли вы изменить HCL на YAML?
- Готовы ли отказаться от Ansible?
- Готовы ли вы заменить рутинные процессы настоящей автоматизацией?
- Azure Functions? Serverless? Infrastructure as Code?

Все то, о чем вы мечтали и хотели попробовать, но до сих пор не попробовали.

### Immutable Infrastructure и Talos Linux

Как мы отказались от классических дистрибутивов Linux в пользу Immutable Systems? Почему мы решили заехать на Talos Linux и какие проблемы он нам доставил? С точки зрения операционной поддержки: сможешь ли ты с SSH зайти на хост или нет?

### Эволюция инструментов

В основном будет рассказано о том, как происходила эволюция систем от Kubespray. В дальнейшем кто-то пытался сделать что-то на Terraform — и как это получилось.

- Как мы отказались от Helm?
- Как мы пошли в сторону декларативного описания ресурсов и версионирования при помощи Custom Resources Kubernetes с минимальными усилиями?
- Сможет ли один DevOps-инженер поддерживать развитую платформу?
- Смогут ли четверо DevOps за год сделать ее незабываемой?

### GitOps и компромиссы

Что нам стоило внедрение GitOps, и на какие компромиссы мы решили пойти?

- Удобство разработки
- Безболезненное тестирование на staging-окружении
- Железная АКБ (Access Control) на production-окружении

### Ключевые технологии

- **Kubernetes** — фундамент платформы
- **Kubespray** — первые шаги автоматизации развертывания
- **Cluster API** — управление жизненным циклом кластеров
- **Crossplane** — унификация AWS, GCP и on-premise инфраструктуры
- **GitOps** — декларативное управление конфигурациями
- **Talos Linux** — immutable операционная система для Kubernetes

## Целевая аудитория

Доклад будет интересен DevOps/SRE-инженерам, платформенным инженерам и всем, кто строит или планирует строить Kubernetes-платформы в гибридных окружениях (облако + on-premise).

## Что узнают слушатели

- Реальный опыт эволюции Kubernetes-платформ за 5 лет
- Практические кейсы использования Cluster API и Crossplane
- Lessons learned при внедрении GitOps
- Компромиссы между удобством разработки и безопасностью production-окружений
- Подводные камни immutable infrastructure и Talos Linux
